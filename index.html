<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Sneaky Snake !</title>
  <style>
    .body {
      color: white;
      background-color: #201e1e;
    }

    .controls {
      position: absolute;
      right: 5px;
      top: 5px;
      display: inline-grid;
      gap: 5px;
      opacity: .75;
      grid-template:
            ". up ."
            "left center right"
            ". down .";
    }

    .controls:hover {
      opacity: 1;
    }

    .control {
      font-size: 25px;
      grid-area: var(--cell);
      appearance: none;
      border: none;
      padding: 0;
      margin: 0;
      opacity: .75;
      cursor: pointer;
      background-color: transparent;
    }

    .control:hover {
      opacity: 1;
    }

    .output {
      font-family: monospace
    }
  </style>
</head>
<body class="body">
<div class="controls">
  <button class="control" onclick="controls.tick()" style="--cell:center">‚èØÔ∏è</button>
  <button class="control" onclick="controls.up()" style="--cell:up">üîº</button>
  <button class="control" onclick="controls.down()" style="--cell:down">üîΩ</button>
  <button class="control" onclick="controls.left()" style="--cell:left">‚óÄÔ∏è</button>
  <button class="control" onclick="controls.right()" style="--cell:right">‚ñ∂Ô∏è</button>
</div>
<pre class="output" id="output"></pre>
<script src="dist/index.js"></script>
<script>
  const output = document.getElementById('output')

  function log(text) {
    output.innerText += `${text}\n`
  }

  const afterTick = (state) => log(JSON.stringify(state))
  const directionChanged = ({ direction }) => log(`Going ${direction}`)
  let game = new Game()
  game.events.on('afterTick', afterTick)
  game.events.on('directionChanged', directionChanged)

  const controls = {
    up: () => game.changeDirection('up'),
    down: () => game.changeDirection('down'),
    left: () => game.changeDirection('left'),
    right: () => game.changeDirection('right'),
    tick: () => game.tick()
  }

  window.addEventListener('keydown', ({ key }) => {
    if (key === 'ArrowUp') {
      controls.up()
    } else if (key === 'ArrowDown') {
      controls.down()
    } else if (key === 'ArrowLeft') {
      controls.left()
    } else if (key === 'ArrowRight') {
      controls.right()
    } else if (key === ' ') {
      controls.tick()
    }
  })
</script>
</body>
</html>