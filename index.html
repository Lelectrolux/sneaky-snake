<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Sneaky Snake !</title>
  <link rel="icon" type="image/png" href="favicon.png">
  <link href="dist/tailwind.css" rel="stylesheet">
  <link rel="preload" href="SpriteSheet.svg" as="image">
  <script src="dist/index.js" defer></script>
  <script src="https://unpkg.com/alpinejs" defer></script>
  <style>
    .no-scrollbar::-webkit-scrollbar {
      display: none;
    }

    .no-scrollbar {
      -ms-overflow-style: none; /* IE and Edge */
      scrollbar-width: none; /* Firefox */
    }
  </style>
</head>
<body class="flex flex-col h-screen text-gray-700 bg-gray-50 gap-4">
<header class="flex items-center justify-evenly p-4">
  <h1 class="text-8xl text-gray-900 font-bold">🐍 Sneaky Snake !</h1>

  <nav
    x-data
    class="grid gap-4 select-none text-5xl font-bold text-gray-800"
    style='grid-template: ". up ." "left playpause right" ". down ."'>
    <template x-for="(icon, action) in {up: '⬆️', down: '⬇️', left: '⬅️', right: '➡️', playpause: '⏯️'}">
      <button
        class="
          px-2 py-1 w-12 h-12 flex items-center justify-center border rounded bg-gray-200 cursor-pointer shadow-lg
          transition duration-75 active:translate-y-1 active:shadow"
        :style="`grid-area:${action}`"
        @click="$store.game[action]()"
        x-text="icon"></button>
    </template>
  </nav>
</header>

<div class="flex-grow overflow-hidden flex justify-around items-start p-4">
  <canvas
    x-init="new SpriteRenderer($store.game, $el)"
    @click="$store.game.play()"
    class="max-h-full max-w-full"
  ></canvas>
  <pre
    x-init="new AsciiRenderer($store.game, $el)"
    class="leading-none select-none tracking-[.45em] text-4xl before:content-[aze]"
  ></pre>
</div>

<!--<pre
  style="tab-size: 3; grid-area: logger"
  class="overflow-y-auto divide-y-2 border-r-2 no-scrollbar h-screen fixed opacity-25 hover:opacity-100"
  x-init="new ConsoleRenderer(
    $store.game,
    text => {
      let elem = document.createElement('p')
      elem.innerText = text
      $el.prepend(elem)
      $el.scrollTo(0,0)
      if ($el.children.length > 10) {
        $el.removeChild($el.lastChild)
      }
    }
  )"
></pre>-->

<script>
  document.addEventListener('alpine:init', () => {
    Alpine.store('game', new Game({ boxed: true, speed: 150 }))
  })
</script>
</body>
</html>